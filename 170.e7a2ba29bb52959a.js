"use strict";(self.webpackChunkblockcore_dapp=self.webpackChunkblockcore_dapp||[]).push([[170],{8170:(B,P,s)=>{s.r(P),s.d(P,{AuthModule:()=>Q});var f=s(9808),u=s(428),i=s(3075),e=s(5e3),g=s(2313),w=s(1645),h=s(263),d=s(7093),v=s(7423),l=s(9224),Z=s(5899),c=s(3489),_=s(7531),T=s(2368);function C(o,a){1&o&&(e.TgZ(0,"mat-error",13),e._uU(1," Please enter a valid email address "),e.qZA())}function q(o,a){1&o&&(e.TgZ(0,"mat-error",14),e._uU(1," Email is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function I(o,a){1&o&&(e.TgZ(0,"mat-error",15),e._uU(1," Password is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function R(o,a){1&o&&e._UZ(0,"mat-progress-bar",16)}let y=(()=>{class o{constructor(r,t,n,m){this.router=r,this.titleService=t,this.notificationService=n,this.authenticationService=m}ngOnInit(){this.titleService.setTitle("blockcore-dapp - Login"),this.authenticationService.logout(),this.createForm()}createForm(){const r=localStorage.getItem("savedUserEmail");this.loginForm=new i.cw({email:new i.NI(r,[i.kI.required,i.kI.email]),password:new i.NI("",i.kI.required),rememberMe:new i.NI(null!==r)})}login(){var r,t,n;const m=null===(r=this.loginForm.get("email"))||void 0===r?void 0:r.value,p=null===(t=this.loginForm.get("password"))||void 0===t?void 0:t.value,M=null===(n=this.loginForm.get("rememberMe"))||void 0===n?void 0:n.value;this.loading=!0,this.authenticationService.login(m.toLowerCase(),p).subscribe(b=>{M?localStorage.setItem("savedUserEmail",m):localStorage.removeItem("savedUserEmail"),this.router.navigate(["/"])},b=>{this.notificationService.openSnackBar(b.error),this.loading=!1})}resetPassword(){this.router.navigate(["/auth/password-reset-request"])}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(u.F0),e.Y36(g.Dx),e.Y36(w.g),e.Y36(h.$))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:24,vars:6,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"container","login-container"],["fxFlex","30%","fxFlex.sm","50%","fxFlex.xs","90%",3,"formGroup"],[1,"full-width"],["id","emailInput","matInput","","placeholder","Email","formControlName","email","autocomplete","email","type","email"],["id","invalidEmailError",4,"ngIf"],["id","requiredEmailError",4,"ngIf"],["id","passwordInput","matInput","","placeholder","Password","formControlName","password","type","password","autocomplete","current-password"],["id","requiredPasswordError",4,"ngIf"],["formControlName","rememberMe"],[1,"login-actions"],["mat-raised-button","","id","login","color","primary",3,"disabled","click"],["mat-button","","id","resetPassword","type","button",3,"click"],["mode","indeterminate",4,"ngIf"],["id","invalidEmailError"],["id","requiredEmailError"],["id","requiredPasswordError"],["mode","indeterminate"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"form",1)(2,"mat-card")(3,"mat-card-title"),e._uU(4,"blockcore-dapp"),e.qZA(),e.TgZ(5,"mat-card-subtitle"),e._uU(6,"Log in to your account"),e.qZA(),e.TgZ(7,"mat-card-content")(8,"mat-form-field",2),e._UZ(9,"input",3),e.YNc(10,C,2,0,"mat-error",4),e.YNc(11,q,4,0,"mat-error",5),e.qZA(),e.TgZ(12,"mat-form-field",2),e._UZ(13,"input",6),e.YNc(14,I,4,0,"mat-error",7),e.qZA(),e.TgZ(15,"div",2)(16,"mat-slide-toggle",8),e._uU(17,"Remember my email address"),e.qZA()()(),e.TgZ(18,"mat-card-actions",9)(19,"button",10),e.NdJ("click",function(){return t.login()}),e._uU(20,"Login"),e.qZA(),e.TgZ(21,"button",11),e.NdJ("click",function(){return t.resetPassword()}),e._uU(22,"Reset Password"),e.qZA()()(),e.YNc(23,R,1,0,"mat-progress-bar",12),e.qZA()()),2&r&&(e.xp6(1),e.Q6J("formGroup",t.loginForm),e.xp6(9),e.Q6J("ngIf",t.loginForm.controls.email.hasError("email")),e.xp6(1),e.Q6J("ngIf",t.loginForm.controls.email.hasError("required")),e.xp6(3),e.Q6J("ngIf",t.loginForm.controls.email.hasError("required")),e.xp6(5),e.Q6J("disabled",t.loginForm.invalid||t.loading),e.xp6(4),e.Q6J("ngIf",t.loading))},dependencies:[f.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,d.xw,d.Wh,d.yH,v.lW,l.a8,l.dn,l.n5,l.$j,l.hq,Z.pW,c.TO,c.KE,_.Nt,T.Rr]}),o})();function N(o,a){1&o&&(e.TgZ(0,"mat-error",10),e._uU(1," Please enter a valid email address "),e.qZA())}function A(o,a){1&o&&(e.TgZ(0,"mat-error",11),e._uU(1," Email is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function x(o,a){1&o&&e._UZ(0,"mat-progress-bar",12)}let J=(()=>{class o{constructor(r,t,n,m){this.authService=r,this.notificationService=t,this.titleService=n,this.router=m}ngOnInit(){var r;this.titleService.setTitle("blockcore-dapp - Password Reset Request"),this.form=new i.cw({email:new i.NI("",[i.kI.required,i.kI.email])}),null===(r=this.form.get("email"))||void 0===r||r.valueChanges.subscribe(t=>{this.email=t.toLowerCase()})}resetPassword(){this.loading=!0,this.authService.passwordResetRequest(this.email).subscribe(r=>{this.router.navigate(["/auth/login"]),this.notificationService.openSnackBar("Password verification mail has been sent to your email address.")},r=>{this.loading=!1,this.notificationService.openSnackBar(r.error)})}cancel(){this.router.navigate(["/"])}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(h.$),e.Y36(w.g),e.Y36(g.Dx),e.Y36(u.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-password-reset-request"]],decls:18,vars:5,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"container","login-container"],["fxFlex","30%","fxFlex.sm","50%","fxFlex.xs","90%",3,"formGroup"],[1,"full-width"],["id","emailInput","matInput","","placeholder","Email","formControlName","email","autocomplete","email","type","email"],["id","invalidEmailError",4,"ngIf"],["id","requiredEmailError",4,"ngIf"],[1,"login-actions"],["id","submit","mat-raised-button","","color","primary",3,"disabled","click"],["id","cancel","mat-button","",3,"click"],["mode","indeterminate",4,"ngIf"],["id","invalidEmailError"],["id","requiredEmailError"],["mode","indeterminate"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"form",1)(2,"mat-card")(3,"mat-card-title"),e._uU(4,"blockcore-dapp"),e.qZA(),e.TgZ(5,"mat-card-subtitle"),e._uU(6,"Reset your password"),e.qZA(),e.TgZ(7,"mat-card-content")(8,"mat-form-field",2),e._UZ(9,"input",3),e.YNc(10,N,2,0,"mat-error",4),e.YNc(11,A,4,0,"mat-error",5),e.qZA()(),e.TgZ(12,"mat-card-actions",6)(13,"button",7),e.NdJ("click",function(){return t.resetPassword()}),e._uU(14,"Reset Password"),e.qZA(),e.TgZ(15,"button",8),e.NdJ("click",function(){return t.cancel()}),e._uU(16,"Cancel"),e.qZA()()(),e.YNc(17,x,1,0,"mat-progress-bar",9),e.qZA()()),2&r&&(e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(9),e.Q6J("ngIf",t.form.controls.email.hasError("email")),e.xp6(1),e.Q6J("ngIf",t.form.controls.email.hasError("required")),e.xp6(2),e.Q6J("disabled",t.form.invalid||t.loading),e.xp6(4),e.Q6J("ngIf",t.loading))},dependencies:[f.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,d.xw,d.Wh,d.yH,v.lW,l.a8,l.dn,l.n5,l.$j,l.hq,Z.pW,c.TO,c.KE,_.Nt]}),o})();var U=s(5245);function k(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Please enter a new password "),e.qZA())}function E(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Please enter a your current password "),e.qZA())}function S(o,a){1&o&&e._UZ(0,"mat-progress-bar",13)}const F=[{path:"login",component:y},{path:"password-reset-request",component:J},{path:"password-reset",component:(()=>{class o{constructor(r,t,n,m,p){this.activeRoute=r,this.router=t,this.authService=n,this.notificationService=m,this.titleService=p,this.titleService.setTitle("blockcore-dapp - Password Reset"),this.hideNewPassword=!0,this.hideNewPasswordConfirm=!0}ngOnInit(){this.activeRoute.queryParamMap.subscribe(r=>{this.token=r.get("token")+"",this.email=r.get("email")+"",(!this.token||!this.email)&&this.router.navigate(["/"])}),this.form=new i.cw({newPassword:new i.NI("",i.kI.required),newPasswordConfirm:new i.NI("",i.kI.required)})}resetPassword(){var r,t;const n=null===(r=this.form.get("newPassword"))||void 0===r?void 0:r.value,m=null===(t=this.form.get("newPasswordConfirm"))||void 0===t?void 0:t.value;n===m?(this.loading=!0,this.authService.passwordReset(this.email,this.token,n,m).subscribe(()=>{this.notificationService.openSnackBar("Your password has been changed."),this.router.navigate(["/auth/login"])},p=>{this.notificationService.openSnackBar(p.error),this.loading=!1})):this.notificationService.openSnackBar("Passwords do not match")}cancel(){this.router.navigate(["/"])}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(u.gz),e.Y36(u.F0),e.Y36(h.$),e.Y36(w.g),e.Y36(g.Dx))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-password-reset"]],decls:26,vars:10,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"container","login-container"],["fxFlex","30%","fxFlex.sm","50%","fxFlex.xs","90%",3,"formGroup"],[1,"full-width"],["id","emailInput","matInput","","readonly","","disabled","",3,"value"],["id","passwordInput","matInput","","placeholder","New Password","formControlName","newPassword","autocomplete","new-password",3,"type"],["id","togglePasswordVisibility","matSuffix","",3,"click"],[4,"ngIf"],["id","passwordConfirmInput","matInput","","placeholder","New Password Confirmation","formControlName","newPasswordConfirm","autocomplete","new-password",3,"type"],["id","togglePasswordConfirmVisibility","matSuffix","",3,"click"],[1,"login-actions"],["id","submit","mat-raised-button","","color","primary",3,"disabled","click"],["id","cancel","mat-button","",3,"click"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"form",1)(2,"mat-card")(3,"mat-card-title"),e._uU(4,"blockcore-dapp"),e.qZA(),e.TgZ(5,"mat-card-subtitle"),e._uU(6,"Reset your password"),e.qZA(),e.TgZ(7,"mat-card-content")(8,"mat-form-field",2),e._UZ(9,"input",3),e.qZA(),e.TgZ(10,"mat-form-field",2),e._UZ(11,"input",4),e.TgZ(12,"mat-icon",5),e.NdJ("click",function(){return t.hideNewPassword=!t.hideNewPassword}),e._uU(13),e.qZA(),e.YNc(14,k,2,0,"mat-error",6),e.qZA(),e.TgZ(15,"mat-form-field",2),e._UZ(16,"input",7),e.TgZ(17,"mat-icon",8),e.NdJ("click",function(){return t.hideNewPasswordConfirm=!t.hideNewPasswordConfirm}),e._uU(18),e.qZA(),e.YNc(19,E,2,0,"mat-error",6),e.qZA()(),e.TgZ(20,"mat-card-actions",9)(21,"button",10),e.NdJ("click",function(){return t.resetPassword()}),e._uU(22,"OK"),e.qZA(),e.TgZ(23,"button",11),e.NdJ("click",function(){return t.cancel()}),e._uU(24,"Back to Login"),e.qZA()()(),e.YNc(25,S,1,0,"mat-progress-bar",12),e.qZA()()),2&r&&(e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(8),e.Q6J("value",t.email),e.xp6(2),e.Q6J("type",t.hideNewPassword?"password":"text"),e.xp6(2),e.hij(" ",t.hideNewPassword?"visibility":"visibility_off"," "),e.xp6(1),e.Q6J("ngIf",t.form.controls.newPassword.hasError("required")),e.xp6(2),e.Q6J("type",t.hideNewPasswordConfirm?"password":"text"),e.xp6(2),e.hij(" ",t.hideNewPasswordConfirm?"visibility":"visibility_off"," "),e.xp6(1),e.Q6J("ngIf",t.form.controls.newPasswordConfirm.hasError("required")),e.xp6(2),e.Q6J("disabled",t.form.invalid||t.loading),e.xp6(4),e.Q6J("ngIf",t.loading))},dependencies:[f.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,d.xw,d.Wh,d.yH,U.Hw,v.lW,l.a8,l.dn,l.n5,l.$j,l.hq,Z.pW,c.TO,c.KE,c.R9,_.Nt]}),o})()}];let Y=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.Bz.forChild(F),u.Bz]}),o})();var L=s(1453);let Q=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.ez,L.m,Y]}),o})()}}]);